import{a as g,t as O,o as a,c as l,f as t,D as _,b as p,K as E,x as V,y as S,w as k,F as b,E as w,u as o,v as h,G as R,g as M,n as T,S as I,C as N,I as F,z as x,B as y,J as A,L as q}from"./index-13c58849.js";import{s as $,I as D}from"./requests-89d0a4b8.js";import{a as v,u as j,b as L,c as C}from"./index-49164287.js";import{_ as P}from"./IconButton.vue_vue_type_style_index_0_lang-b0d09b56.js";import{_ as K}from"./CheckboxInput.vue_vue_type_script_setup_true_lang-518f203b.js";import{C as W}from"./inputs-6139d781.js";import{_ as U}from"./OrderListItem.vue_vue_type_script_setup_true_lang-f2209271.js";const z="/assets/image-not-available-348c8812.jpg",J=["title"],Q={class:"card-img-top-wrapper"},H=["src","alt"],X=["alt"],Y={class:"card-body"},Z={class:"card-title"},ee={class:"card-subtitle fs-6 text-muted"},te={class:"card-text d-md-block d-none"},se=g({__name:"MenuCard",props:{item:null},setup(i){const e=i,n=O({showOriginalImage:!0}),s=v();function c(){s.addOrder(e.item)}function r(){n.showOriginalImage=!1}return(d,m)=>(a(),l("div",{class:"card m-2",onClick:c,title:i.item.description},[t("div",Q,[n.showOriginalImage?(a(),l("img",{key:0,src:i.item.img,alt:i.item.name,class:"card-img-top",loading:"lazy",onError:r},null,40,H)):(a(),l("img",{key:1,src:z,alt:i.item.name,class:"card-img-top"},null,8,X))]),t("div",Y,[t("h5",Z,_(i.item.name),1),t("p",ee,_(i.item.harga),1),t("p",te,_(i.item.description),1)])],8,J))}});const ne={class:"w-100 me-4"},ae={class:"text-muted"},ie=g({__name:"OrderItem",props:{item:null},setup(i){const e=i,n=v();function s(){n.removeOrder(e.item)}function c(){n.viewedOrder=e.item}return(r,d)=>(a(),l("li",{class:"your-orders list-group-item d-flex justify-content-between align-items-center",onClick:c},[t("div",ne,[t("b",null,_(i.item.name),1),t("div",null,_(i.item.harga)+" x"+_(i.item.quantity),1),t("div",ae,_(i.item.note),1)]),p(P,{icon:"/delete.svg",semantic:"Delete Order",onClick:E(s,["stop"]),class:"btn-danger"},null,8,["onClick"])]))}});const oe={class:"offcanvas-header border-bottom tss-bg-secondary"},re=t("h5",{class:"offcanvas-title",id:"yourOrdersOffcanvasLabel"},"Pesanan Anda",-1),ce={class:"offcanvas-body p-0"},le={class:"px-2 py-1"},de={class:"position-absolute bottom-0 w-100 mt-2 p-2 border-top tss-bg-secondary"},ue=t("b",null,"Total: ",-1),_e=g({__name:"OrdersOffcanvas",setup(i){const e=O({isOffcanvasOpen:!0});function n(){e.isOffcanvasOpen=!window.matchMedia("(max-width: 1200px)").matches}const s=j();V(()=>{n(),window.addEventListener("resize",n)}),S(()=>{window.removeEventListener("resize",n)});const c=v(),r=L();async function d(){if(r.beginLoading(),!await s.initialize()){r.setError(I,3e3);return}if(c.orders.length==0){r.setError("Minimal harus ada satu pesanan!",3e3);return}try{await c.createTransaction(),c.current||r.setError(I,3e3),r.setLoading(!1)}catch(m){console.error(m),r.setError(N,3e3)}}return(m,f)=>(a(),l(b,null,[t("button",{class:"btn btn-primary d-lg-none open-offcanvas-btn",onClick:f[0]||(f[0]=u=>e.isOffcanvasOpen=!0)}," Pesanan Anda "),t("div",{class:T(["offcanvas offcanvas-end",{show:e.isOffcanvasOpen,hiding:!e.isOffcanvasOpen}]),"data-bs-scroll":"true","data-bs-backdrop":"false",tabindex:"-1","aria-labelledby":"yourOrdersOffcanvasLabel"},[t("div",oe,[re,t("button",{type:"button",class:"btn-close d-lg-none","data-bs-dismiss":"offcanvas","aria-label":"Close",onClick:f[1]||(f[1]=u=>e.isOffcanvasOpen=!1)})]),t("div",ce,[t("div",le,[p(R,{name:"list-slide-left",tag:"ul",class:"list-group"},{default:k(()=>[(a(!0),l(b,null,w(o(c).orders,u=>(a(),h(ie,{item:u,key:u.id},null,8,["item"]))),128))]),_:1})]),t("div",de,[t("p",null,[ue,M(" "+_(o(c).hargaTotal),1)]),t("div",{class:"w-100 text-center"},[t("button",{class:"btn btn-primary w-75",onClick:d},"Pesan")])])])],2)],64))}});const me=["title"],fe={class:"d-flex justify-content-between"},pe={class:"fs-6 text-muted"},ge={class:"card-text d-md-block d-none"},he=g({__name:"MenuListItem",props:{item:null},setup(i){const e=i,n=v();function s(){n.addOrder(e.item)}return(c,r)=>(a(),l("li",{class:"my-2 ms-4 list-group-item rounded menu-list-item",onClick:s,title:i.item.description},[t("div",fe,[t("h5",null,_(i.item.name),1),t("p",pe,_(i.item.harga),1)]),t("p",ge,_(i.item.description),1)],8,me))}});const ve={class:"my-3 ms-4 search-input"},be=["value","placeholder"],ye=g({__name:"SearchBar",props:{semantic:null},emits:["search"],setup(i,{emit:e}){const n=F("");function s(c){const r=c.target;n.value=r.value,e("search",n.value)}return(c,r)=>(a(),l("div",ve,[t("input",{type:"search",value:n.value,onInput:s,placeholder:i.semantic??"Search"},null,40,be)]))}});const xe={class:"mb-3"},Oe=["value","max"],$e=g({__name:"PageButtons",setup(i){const e=C();function n(d){if(d instanceof KeyboardEvent&&d.key!="Enter")return;const m=d.target,f=parseInt(m.value);e.changePage(isNaN(f)?0:f-1)}const s=x(()=>e.page<e.totalPages),c=x(()=>e.page>0);function r(d){e.page=Math.max(0,Math.min(e.totalPages,e.page+d))}return(d,m)=>(a(),l("div",xe,[o(c)?(a(),l("button",{key:0,class:"btn btn-secondary",onClick:m[0]||(m[0]=f=>r(-1))}," Prev ")):y("",!0),t("input",{class:"col-1 mx-2 p-2 border-0 rounded",type:"number",title:"Page Number",min:"1",onKeypress:n,onFocusout:n,value:o(e).page+1,max:o(e).totalPages},null,40,Oe),o(s)?(a(),l("button",{key:1,class:"btn btn-secondary",onClick:m[1]||(m[1]=f=>r(1))}," Next ")):y("",!0)]))}});const we=(i,e)=>{const n=i.__vccOpts||i;for(const[s,c]of e)n[s]=c;return n},ke={};function Ce(i,e){return a(),h(q,{name:"scale"},{default:k(()=>[A(i.$slots,"default")]),_:3})}const G=we(ke,[["render",Ce]]),Ie={class:"position-relative"},Se={key:0,class:"tss-bg-secondary rounded shadow p-3 pe-5 col-1 popup position-absolute"},Pe=t("h5",null,"Filter Berdasarkan Kategori",-1),Ee=g({__name:"FilterPopup",setup(i){const e=C(),n=x(()=>new W("",e.filterCategories,e.allCategories.map(r=>({label:r,value:r})),()=>"")),s=O({isOpen:!1});function c(r){e.filterCategories=r,e.page=0}return(r,d)=>(a(),l("div",Ie,[p(P,{icon:"/filter.svg",semantic:"Filter by category",class:"btn-secondary",onClick:d[0]||(d[0]=m=>s.isOpen=!s.isOpen)}),p(G,null,{default:k(()=>[s.isOpen?(a(),l("div",Se,[Pe,p(K,{input:o(n),value:o(e).filterCategories,"onUpdate:value":c,class:"capitalize"},null,8,["input","value"])])):y("",!0)]),_:1})]))}});const Ve={class:"modal d-block",tabindex:"-1","aria-hidden":"true",role:"dialog"},Me={key:0,class:"modal-dialog"},Te={class:"modal-content"},Ne={class:"modal-header tss-bg-secondary"},Le={class:"modal-title"},ze={class:"modal-body"},Ge={class:"d-flex mb-3"},Be=["src","alt"],Re=["alt"],Fe={class:"mx-3"},Ae={class:"fs-6 mb-2"},qe={class:"fs-6 mb-0"},De={class:"d-flex align-items-center w-100 mb-3"},je={class:"mx-2"},Ke=["value"],We=g({__name:"OrderDetail",setup(i){const e=v(),n=O({showOriginalImage:!0}),s=x(()=>e.viewedOrder);function c(){n.showOriginalImage=!1}function r(){s.value.quantity==0&&e.removeOrder(e.viewedOrder),e.examineOrder(void 0)}function d(f){s.value.quantity=Math.max(0,Math.min(9,s.value.quantity+f))}function m(f){const u=f.target;s.value.note=u.value}return(f,u)=>(a(),l("div",Ve,[o(e).viewedOrder?(a(),l("div",Me,[t("div",Te,[t("div",Ne,[t("h5",Le,_(o(s).name),1),t("button",{class:"btn-close",onClick:r})]),t("div",ze,[t("div",Ge,[n.showOriginalImage?(a(),l("img",{key:0,src:o(s).img,alt:o(s).name,class:"modal-img",loading:"lazy",onError:c},null,40,Be)):(a(),l("img",{key:1,src:z,alt:o(s).name,class:"modal-img"},null,8,Re)),t("div",Fe,[t("p",Ae,_(o(s).description),1),t("p",qe,[t("i",null,_(o(s).harga),1)]),t("div",De,[t("button",{class:"btn btn-secondary",onClick:u[0]||(u[0]=B=>d(-1))},"-"),t("span",je,_(o(s).quantity),1),t("button",{class:"btn btn-secondary",onClick:u[1]||(u[1]=B=>d(1))},"+")])])]),t("textarea",{rows:"3",class:"w-100 p-3 rounded",value:o(s).note,onInput:m,placeholder:"Pesan Tambahan"},null,40,Ke)])])])):y("",!0)]))}});const Ue={class:"d-flex align-items-center mw-70-lg"},Je={class:"d-flex align-items-center me-4"},Qe={key:0,class:"menu-grid mw-70-lg"},He={key:1,class:"mw-70-lg"},Xe={class:"list-group"},Ye=g({__name:"OrderView",setup(i){const e=O({isGridView:localStorage.getItem("isGridView")!="false"}),n=C(),s=v(),c=x(()=>e.isGridView?{url:"/grid_view.svg",semantic:"Grid View"}:{url:"/list.svg",semantic:"List View"});function r(m){n.searchTerm=m,n.page=0}function d(){e.isGridView=!e.isGridView,localStorage.setItem("isGridView",e.isGridView.toString())}return(m,f)=>(a(),l(b,null,[p(G,null,{default:k(()=>[o(s).viewedOrder?(a(),h(We,{key:0})):y("",!0)]),_:1}),t("div",Ue,[p(ye,{onSearch:r,class:"w-100 me-5"}),t("div",Je,[p(Ee),p(P,{icon:o(c).url,semantic:o(c).semantic,class:"btn-secondary ms-2",onClick:d},null,8,["icon","semantic"])])]),e.isGridView?(a(),l("div",Qe,[(a(!0),l(b,null,w(o(n).current,u=>(a(),h(se,{item:u,key:u.id},null,8,["item"]))),128))])):(a(),l("div",He,[t("ul",Xe,[(a(!0),l(b,null,w(o(n).current,u=>(a(),h(he,{item:u,key:u.id},null,8,["item"]))),128))])])),p($e),p(_e)],64))}});const Ze="/assets/schedule-2f1cd04c.svg",et="/assets/check-a40930ed.svg",tt={class:"d-flex mt-5 mx-2 mx-lg-5"},st={class:"col-6 tss-bg-secondary-dark position-relative rounded"},nt=t("header",{class:"tss-bg-primary px-3 py-2 text-center fs-2 fw-bold rounded"}," Pesanan Anda ",-1),at={class:"py-4 px-3"},it={class:"list-group transaction-summary-list"},ot=t("hr",null,null,-1),rt={class:"position-absolute bottom-0 mb-3"},ct=t("b",null,"Total: ",-1),lt={class:"col-6 d-flex flex-column align-items-center"},dt=["onClick"],ut={key:1,id:"waiting-logo",class:"status-logo mt-3"},_t=t("img",{src:Ze,alt:"Waiting..."},null,-1),mt=[_t],ft={key:2,id:"success-logo",class:"status-logo mt-3"},pt=g({__name:"WaitView",setup(i){const e=v();$.on("cookOrder",s=>{s==e.current.id&&(e.current.phase="cooking")}),$.on("finishOrder",s=>{s==e.current.id&&(e.current.phase="finished")}),S(()=>{$.off("cookOrder"),$.off("finishOrder")});function n(){e.finishTransaction()}return(s,c)=>(a(),l("div",tt,[t("div",st,[nt,t("div",at,[t("ul",it,[(a(!0),l(b,null,w(o(e).current.orders,r=>(a(),h(U,{item:r},null,8,["item"]))),256))]),ot,t("div",rt,[ct,M(" "+_(o(e).current.hargaTotal),1)])])]),t("div",lt,[t("div",{class:T(["text-capitalize fs-2 p-3 rounded fw-bold shadow-lg",{"text-warning":o(e).current.phase=="pending","text-info":o(e).current.phase=="cooking","text-success":o(e).current.phase=="finished","fw-bold":o(e).current.phase=="finished"}])},_(o(e).current.phase),3),o(e).current.phase=="finished"?(a(),l("a",{key:0,class:"text-success fw-bold",href:"#",onClick:E(n,["prevent"])},"Click untuk kembali ke halaman sebelumnya!",8,dt)):y("",!0),o(e).current.phase!=="finished"?(a(),l("div",ut,mt)):(a(),l("div",ft,[t("img",{src:et,alt:"Success",onClick:n})]))])]))}});const $t=g({__name:"App",setup(i){const e=C(),n=v();V(async()=>{await n.initialize()});const s=L();s.setLoading(!0);const c=new D(e.initialize).on("success",()=>{s.cleanup(),e.isMenuInitialized||s.setError(I,3e3)}).on("failure",r=>{console.error(r),s.setLoading(!1),s.setError(N)});return c.run(),S(()=>{c.cleanup()}),(r,d)=>o(n).current?(a(),h(pt,{key:0})):(a(),h(Ye,{key:1}))}});export{$t as default};
